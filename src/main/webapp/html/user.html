<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!-- Meta, title, CSS, favicons, etc. -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AirShare | User</title>
	<!-- Bootstrap -->
	<link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- Custom Theme Style -->
	<link rel="icon" href="../img/xorfone_logo_48.png" type="image/png" sizes="16x16">
	<link href="../css/lib/fastselect.min.css" rel="stylesheet">
	<link href="../css/custom.css" rel="stylesheet">

	<!-- jQuery -->
	<script src="../vendors/jquery/dist/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>
	<!-- Custom Theme Scripts -->
	<script src="../js/custom.js"></script>
	<script src="../js/properties.js"></script>
	<script src="../js/utils.js"></script>
	<!-- Parsley -->
	<script src="../vendors/parsleyjs/dist/parsley.min.js"></script>
	<script src="../js/lib/fastselect.standalone.js"></script>
	<!-- Datatables -->
	<script src="../vendors/datatables.net/js/jquery.dataTables.min.js"></script>
	<script src="../vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
	<script src="../vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
	<script src="../vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>

</head>
<!-- -->

<body class="nav-md">
	<div class="container body">
		<div class="main_container">
			<div id="header"></div>
			<!-- page content -->
			<div class="right_col" role="main">
				<div>
					<div class="clearfix"></div>
					<div>
						<div class="col-md-12 col-xs-12">
							<div class="x_panel">
								<div class="x_title">
									<h2 id="userAction">Add User</h2>
									<div class="clearfix"></div>
								</div>
								<div class="x_content1">
									<br />

									<br />
									<!-- User create form: starts -->


									<div class="col-md-4">
										<div class="panel panel-default">
											 <div class="panel-heading">Select Branch</div>
											<div class="panel-body ">
												<table id="BranchTable" class="table dt-responsive" style="width:100%">
													<thead>
														<tr>
															<th>ID</th>
															<th>NAME</th>
															<th>REG. CODE</th>

														</tr>
													</thead>
												</table>
											</div>
										</div>
									</div>


									<div class="col-md-4">
										<div class="panel panel-default">
											 <div class="panel-heading">Select Semester</div>
											<div class="panel-body ">
												<table id="SemTable1" class="table dt-responsive" style="width:100%">
													<thead>
														<tr>
															<th>ID</th>
															<th>NAME</th>

														</tr>
													</thead>
												</table>
											</div>
										</div>
									</div>

									<div class="col-md-4">
										<div class="panel panel-default">
											 <div class="panel-heading">Select Year</div>
											<div class="panel-body ">
												<table id="YearTable1" class="table dt-responsive" style="width:100%">
													<thead>
														<tr>
															<th>ID</th>
															<th>NAME</th>

														</tr>
													</thead>
												</table>
											</div>
										</div>
									</div>




									

									<br>







									











								





















































							</div>
						</div>

						<form id="createUserForm" data-parsley-validate action="" class="form-horizontal form-label-left ">
							<div class="form-group">
								<br><br>
								<label class="control-label col-md-3 col-sm-3 col-xs-12">Name *</label>
								<div class="col-md-6 col-sm-6 col-xs-12">
									<input id="uname" type="text" class="form-control" required="required" placeholder="Name" />
								</div>
							</div>

							<div class="form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-12">Email</label>
								<div class="col-md-6 col-sm-6 col-xs-12">
									<input type="email" id="uemail" name="email" data-parsley-trigger="change" class="form-control"
										placeholder="Email">
								</div>
							</div>

							<div class="form-group">
								<label class="control-label col-md-3 col-sm-3 col-xs-12">Registration Number
									*</label>
								<div class="col-md-6 col-sm-6 col-xs-12">
									<input id="regname" type="text" class="form-control" required="required"
										placeholder="Registration Number" />
								</div>
							</div>

							</div>

							<br>

							=
							<div class="col-md-9 col-sm-9 col-xs-12">
								<div style="float:left">
									<button id="cancelAddUser" type="button" class="btn-secondary">Cancel</button>
								</div>
								<div style="float:right">
									<button id="createUser" type="submit" class="btn btn-primary btn-sm">Add User</button>
								</div>
							</div>
						</form>

					</div>
				</div>
			</div>
		</div>
	</div>
	</div>


	<script>
		$(document).ready(function () {
			//addPhoneValidation();
			loadHeader();


			var branchDataSet = [


			{
			"id":"1",
			"name": "Computer Science & Engineering",
			"regcode": "CSE001"

			},
			{
			"id": "2",
			"name": "Information Technology",
			"regcode": "IT001"
			}

			];

			var semDataSet = [
			{
			"id":"1",
			"name":"First Sem."
			},
			{
			"id": "2",
			"name": "Second Sem."

			}, {
			"id": "3",
			"name": "Third Sem."

			}, {
			"id": "4",
			"name": "Fourth Sem."

			}, {
			"id": "5",
			"name": "Fifth Sem."

			}, {
			"id": "6",
			"name": "Sixth Sem."

			}, {
			"id": "7",
			"name": "Seventh Sem."

			}, {
			"id": "8",
			"name": "Eight Sem."

			}

			]



			var yearDataSet = [
			{
			"id":"1",
			"name":"First Year."
			},
			{
			"id": "2",
			"name": "Second Year."

			}, {
			"id": "3",
			"name": "Third Year."

			}, {
			"id": "4",
			"name": "Fourth Year."

			}

			]


			$("#BranchTable").dataTable({
			data: branchDataSet,
			responsive: true,
			bLengthChange: false,
			bFilter: false,
			bInfo: false, paging: false,
			//"deferRender": true,
			columns: [
			{ data: "id" },
			{ data: "name" },
			{ data: "regcode" }
			],
			columnDefs: [{
			"width": "20%",
			"targets": 0
			}]

			});




			$("#SemTable1").dataTable({
			data: semDataSet,
			responsive: true,
			bLengthChange: false,
			bFilter: false,
			bInfo: false, paging: false,
			//"deferRender": true,
			columns: [
			{
			data:'id'
			},
			{
			data:'name'
			}

			]

			});




$("#YearTable1").dataTable({
data: yearDataSet,
responsive: true,
bLengthChange: false,
bFilter: false,
bInfo: false, paging: false,
//"deferRender": true,
columns: [
{
data:'id'
},
{
data:'name'
}

]

});


var branch;
var sem;
var year;

$('#BranchTable tbody').on('click', 'tr', function () {
	var table = $('#BranchTable').DataTable();

	if ( $(this).hasClass('selected') ) {
		$(this).removeClass('selected');
	}
	else {

		table.$('tr.selected').removeClass('selected');
		$(this).addClass('selected');
	}

var data = table.row(this).data();
var data1 = JSON.parse(JSON.stringify(data));
console.log(data);
branch = data;
});


 $('#SemTable1 tbody').on('click', 'tr', function () {
 var table = $('#SemTable1').DataTable();
 if ( $(this).hasClass('selected') ) {
 $(this).removeClass('selected');
 }
 else {

 table.$('tr.selected').removeClass('selected');
 $(this).addClass('selected');
 }
 var data = table.row(this).data();
 var data1 = JSON.stringify(data)
 console.log(data1);
 sem = data;
 });

 $('#YearTable1 tbody').on('click', 'tr', function () {
 var table = $('#YearTable1').DataTable();
 if ( $(this).hasClass('selected') ) {
 $(this).removeClass('selected');
 }
 else {

 table.$('tr.selected').removeClass('selected');
 $(this).addClass('selected');
 }
 var data = table.row(this).data();
 var data1 = JSON.stringify(data)
 console.log(data1);
 year = data;
 });



  $("#createUser").on('click', function () {
  // get the values of the subject and body fields


  var name = $("#uname").val();
  var email = $("#uemail").val();
  var regname = $("#regname").val();
  



  var msg = {};

  msg["name"] = name;
  msg["email"] = email;
  msg["regno"] = regname;
  msg["branchDTO"] = branch;
  msg["semDTO"] = sem;
  msg["yearDTO"] = year;


  var myurl = "api/users";
  ajaxRequest(msg, "POST", myurl, processMsgSuccess1, null);

  return false;
  });


  var processMsgSuccess1 = function(response) {
  console.log("Message sent successfully");
  alert('User Added Successfully')

  };












		});
	</script>
</body>

</html>